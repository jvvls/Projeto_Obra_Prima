<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Obra Prima ‚Äî Cadastro de Obras</title>
    <link rel="stylesheet" href="/assets/css/style-editor.css" />
    <link rel="stylesheet" href="/assets/css/footer.css">
</head>

<body>
  <header class="topbar">
    <div class="logo"><a href="index.html"><img src="/assets/images/Logo.png" alt="Logo"></a></div>
    <div class="title">Obra Prima</div>
    <div class="right">
      <div class="user" id="userDropdownToggle">
        <div class="avatar"></div>
        <span>Fulano Silva</span>
        <span class="arrow" >‚ñº</span>
        <div class="user-dropdown" id="userDropdown">
          <button id="homeBtn">P√°gina Inicial</button>
          <button id="toggleFont">Fonte</button>
          <button id="logoutBtn">Sair</button>
        </div>
      </div>
    </div>
  </header>

    <main class="container">
        <section id="cadastro" class="card">
            <h2 class="form-title">Cadastrar / Editar Obra</h2>
            <form id="obraForm" autocomplete="off" enctype="multipart/form-data">
                <div class="field">
                    <label for="titulo">T√≠tulo *</label>
                    <input id="titulo" name="titulo" type="text" required />
                </div>

                <div class="field">
                    <label for="descricao">Descri√ß√£o</label>
                    <textarea id="descricao" name="descricao"></textarea>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="valorContratado">Valor Contratado (R$)</label>
                        <input id="valorContratado" name="valorContratado" type="number" step="0.01" />
                    </div>
                    <div class="col">
                        <label for="status">Status</label>
                        <select id="status" name="status">
                            <option>Planejada</option>
                            <option>Em andamento</option>
                            <option>Paralisada</option>
                            <option>Conclu√≠da</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="dataInicio">Data de In√≠cio</label>
                        <input id="dataInicio" name="dataInicio" type="date" />
                    </div>
                    <div class="col">
                        <label for="previsaoTermino">Previs√£o de T√©rmino</label>
                        <input id="previsaoTermino" name="previsaoTermino" type="date" />
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="orgaoResponsavel">√ìrg√£o Respons√°vel</label>
                        <input id="orgaoResponsavel" name="orgaoResponsavel" type="text" />
                    </div>
                    <div class="col">
                        <label for="empresaExecutora">Empresa Executora</label>
                        <input id="empresaExecutora" name="empresaExecutora" type="text" />
                    </div>
                </div>
                <h2 class="form-title">Endere√ßo</h2>
                <div class="row">
                    <div class="col">
                        <label for="logradouro">Logradouro</label>
                        <input id="logradouro" name="logradouro" type="text" />
                    </div>
                    <div style="width:120px">
                        <label for="numero">N√∫mero</label>
                        <input id="numero" name="numero" type="text" />
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="bairro">Bairro</label>
                        <input id="bairro" name="bairro" type="text" />
                    </div>
                    <div class="col">
                        <label for="cidade">Cidade</label>
                        <input id="cidade" name="cidade" type="text" />
                    </div>
                </div>

                <div class="row">
                    <div style="width:120px">
                        <label for="estado">Estado</label>
                        <input id="estado" name="estado" type="text" />
                    </div>
                    <div style="width:160px">
                        <label for="cep">CEP</label>
                        <input id="cep" name="cep" type="text" />
                    </div>
                </div>
                </fieldset>

                <div class="field">
                    <label for="anexos">Anexos (imagens / documentos)</label>
                    <input id="anexos" name="anexos" type="file" multiple />
                    <div class="small muted">Prot√≥tipo - Arquivos n√£o s√£o enviados: apenas os nomes s√£o registrados.
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="novoObraBtn" class="btn btn-primary">Novo</button>
                    <button type="submit" id="salvarObraBtn" class="btn btn-ghost">Salvar</button>
                    <button type="button" id="limpar" class="btn btn-ghost">Limpar</button>
                </div>

                <!-- TIMELINE: inserida logo abaixo do formul√°rio -->
                <div style="height:14px"></div>

                <div class="form-title" style="margin-top:8px;color:#27ae60">Linha do tempo da obra</div>

                <div class="timeline-section" style="margin-top:8px">
                    <div class="row">
                        <div class="col">
                            <label for="marcoTitulo">T√≠tulo do marco</label>
                            <input id="marcoTitulo" type="text" />
                        </div>
                        <div style="width:120px">
                            <label for="marcoPorcentagem">Porcentagem</label>
                            <input id="marcoPorcentagem" type="number" min="0" max="100" />
                        </div>
                    </div>

                    <div class="row" style="margin-top:8px">
                        <div class="col">
                            <label for="marcoDescricao">Descri√ß√£o</label>
                            <textarea id="marcoDescricao"></textarea>
                        </div>
                        <div style="width:160px">
                            <label for="marcoData">Data</label>
                            <input id="marcoData" type="date" />
                        </div>
                    </div>

                    <div class="form-actions" style="margin-top:8px">
                        <button id="adicionarMarcoBtn" class="btn btn-primary">Adicionar marco</button>
                        <button id="limparMarcoBtn" class="btn btn-ghost">Limpar marco</button>
                    </div>

                    <div style="height:12px"></div>

                    <div class="card">
                        <div style="display:flex;justify-content:space-between;align-items:center">
                            <div><strong>Marcos</strong></div>
                            <div id="progressText">0%</div>
                        </div>

                        <div class="progress-container" style="margin-top:6px">
                            <div class="progress-bar">
                                <div id="progressFill" class="progress-fill" style="width:0%"></div>
                            </div>
                        </div>

                        <div id="timelineList" class="timeline" style="margin-top:12px">
                            <!-- marcos renderizados aqui -->
                        </div>

                        <div id="emptyState" class="empty-state" style="display:flex;margin-top:12px">
                            <div class="empty-icon">üïí</div>
                            <div>Nenhum marco adicionado ainda.</div>
                        </div>
                    </div>
                </div>
                <!-- fim timeline -->

            </form>
        </section>

        <section id="listaObras" class="card" style="margin-top:18px">
            <h2 class="form-title">Obras Cadastradas</h2>

            <div class="filtros" id="filtros" style="display:flex;flex-wrap:wrap;gap:12px">
                <div class="col" style="flex:1;min-width:200px">
                    <label for="q">Pesquisa</label>
                    <input id="q" placeholder="T√≠tulo, empresa, cidade..." />
                </div>

                <div class="col">
                    <label for="filterStatus">Status</label>
                    <select id="filterStatus">
                        <option value="">Todos</option>
                    </select>
                </div>

                <div class="col">
                    <label for="filterCidade">Cidade</label>
                    <select id="filterCidade">
                        <option value="">Todas</option>
                    </select>
                </div>

                <div class="col">
                    <label for="orgaoDropdown">√ìrg√£o Respons√°vel</label>
                    <div class="orgao-dropdown" id="orgaoDropdown" tabindex="0" aria-haspopup="listbox"
                        aria-expanded="false">
                        <button type="button" class="orgao-toggle dropdown-button" id="orgaoToggle">
                            Todos os √≥rg√£os <span class="arrow">&#9662;</span>
                        </button>
                        <div class="orgao-panel dropdown-panel" id="orgaoPanel" role="listbox"
                            aria-multiselectable="true" style="display:none;">
                            <input type="search" id="orgaoSearch" placeholder="Buscar √≥rg√£o..." class="orgao-search">
                            <div class="orgao-actions">
                                <button id="orgaoSelecionarTudo" class="btn small btn-ghost">Selecionar todos</button>
                                <button id="orgaoLimpar" class="btn small btn-ghost">Limpar</button>
                            </div>
                            <div class="orgao-list" id="orgaoList"></div>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <label for="empresaDropdown">Empresa Executora</label>
                    <div class="empresa-dropdown" id="empresaDropdown" tabindex="0" aria-haspopup="listbox"
                        aria-expanded="false">
                        <button type="button" class="empresa-toggle dropdown-button" id="empresaToggle">
                            Todas as empresas <span class="arrow">&#9662;</span>
                        </button>
                        <div class="empresa-panel dropdown-panel" id="empresaPanel" role="listbox"
                            aria-multiselectable="true" style="display:none;">
                            <input type="search" id="empresaSearch" placeholder="Buscar empresa..."
                                class="empresa-search">
                            <div class="empresa-list" id="empresaList"></div>
                            <div class="empresa-actions">
                                <button id="empresaSelecionarTudo" class="btn small btn-ghost">Selecionar tudo</button>
                                <button id="empresaLimpar" class="btn small btn-ghost">Limpar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <label for="sortBy">Ordenar por</label>
                    <select id="sortBy">
                        <option value="titulo">T√≠tulo</option>
                        <option value="dataInicio">Data de In√≠cio</option>
                    </select>
                </div>

                <div class="actions" style="display:flex;gap:8px;align-items:flex-end">
                    <button class="btn btn-ghost" id="resetFiltros">Resetar</button>
                    <button class="btn btn-primary" id="aplicarFiltros">Aplicar</button>
                </div>
            </div>

            <div id="obrasContainer" style="margin-top:12px"></div>
            <p id="msgNenhuma" class="small muted" style="display:none;margin-top:12px">Nenhuma obra encontrada com os
                filtros
                aplicados.</p>
        </section>
    </main>

    <!-- modal editar marco -->
    <div id="modalEditar" class="modal" style="display:none">
        <div class="modal-content">
            <div class="modal-header">
                <strong>Editar marco</strong>
                <button id="modalClose" class="modal-close" aria-label="Fechar">√ó</button>
            </div>

            <div class="form-group">
                <label for="editTitulo">T√≠tulo</label>
                <input id="editTitulo" type="text" />
            </div>

            <div class="form-group">
                <label for="editDescricao">Descri√ß√£o</label>
                <textarea id="editDescricao"></textarea>
            </div>

            <div class="form-group">
                <label for="editPorcentagem">Porcentagem</label>
                <input id="editPorcentagem" type="number" min="0" max="100" />
            </div>

            <div class="form-group">
                <label for="editData">Data</label>
                <input id="editData" type="date" />
            </div>

            <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:8px">
                <button id="cancelarEdicaoBtn" class="btn btn-ghost">Cancelar</button>
                <button id="salvarEdicaoBtn" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        ¬© 2025 Obra Prima ‚Äî Todos os direitos reservados.
    </footer>

    <script src="/assets/js/script-editor.js" defer></script>
</body>

</html>